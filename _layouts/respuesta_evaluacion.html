<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
    <meta name="description" content="{{ page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">

    <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">

    <!-- Mermaid.js para renderizar diagramas -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.min.js" integrity="sha256-GYsZRC+G8LRqF+VtOr90TDooo0J+ZvqNraO1iad7q8w=" crossorigin="anonymous"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        if (typeof mermaid !== 'undefined') {
          mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            securityLevel: 'loose'
          });
          
          // Convertir bloques de código con clase 'language-mermaid' a divs con clase 'mermaid'
          document.querySelectorAll('pre code.language-mermaid').forEach(function(codeBlock) {
            const pre = codeBlock.parentElement;
            const mermaidDiv = document.createElement('div');
            mermaidDiv.className = 'mermaid';
            mermaidDiv.textContent = codeBlock.textContent;
            pre.parentElement.replaceChild(mermaidDiv, pre);
          });
          
          // También manejar bloques <pre class="mermaid">
          document.querySelectorAll('pre.mermaid').forEach(function(preBlock) {
            const mermaidDiv = document.createElement('div');
            mermaidDiv.className = 'mermaid';
            mermaidDiv.textContent = preBlock.textContent;
            preBlock.parentElement.replaceChild(mermaidDiv, preBlock);
          });
          
          // Renderizar todos los diagramas
          mermaid.run();
        }
      });
    </script>

    <style>
      /* Estilos base para pantalla */
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
      }

      img {
        max-width: 100%;
        height: auto;
      }

      .mermaid {
        text-align: center;
        margin: 20px 0;
      }

      table {
        border-collapse: collapse;
        width: 100%;
        margin: 20px 0;
      }

      table, th, td {
        border: 1px solid #ddd;
      }

      th, td {
        padding: 12px;
        text-align: left;
      }

      th {
        background-color: #f2f2f2;
      }

      code {
        background-color: #f4f4f4;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Courier New', monospace;
      }

      pre {
        background-color: #f4f4f4;
        padding: 16px;
        border-radius: 6px;
        overflow-x: auto;
      }

      pre code {
        background-color: transparent;
        padding: 0;
      }

      h2 {
        margin-top: 30px;
        margin-bottom: 15px;
        color: #2c3e50;
        border-bottom: 2px solid #27ae60;
        padding-bottom: 8px;
      }

      h3 {
        margin-top: 20px;
        margin-bottom: 10px;
        color: #34495e;
      }

      /* Estilos de impresión optimizados para EVALUACIÓN */
      @media print {
        body {
          max-width: 100%;
          padding: 0;
          font-size: 11pt;
          line-height: 1.4;
        }

        /* Ocultar elementos de navegación en impresión */
        nav, .navigation, a[href*="index"] {
          display: none !important;
        }

        /* Estilo de página para evaluación */
        @page {
          margin: 1.5cm;
          size: A4;
          
          @top-left {
            content: "Respuestas para Evaluación";
            font-size: 9pt;
            color: #666;
          }
          
          @top-right {
            content: "J. Vargas - Club K2";
            font-size: 9pt;
            color: #666;
          }
          
          @bottom-left {
            content: "☐ Aprobado  ☐ Pendiente  ☐ Requiere revisión";
            font-size: 8pt;
            color: #666;
          }
          
          @bottom-center {
            content: "Pág. " counter(page);
            font-size: 9pt;
            color: #666;
          }
          
          @bottom-right {
            content: "Firma evaluador: __________";
            font-size: 8pt;
            color: #666;
          }
        }

        /* Títulos optimizados para evaluación */
        h1 {
          font-size: 18pt;
          color: #27ae60;
          border-bottom: 3pt solid #27ae60;
          padding-bottom: 8pt;
          margin-bottom: 12pt;
          page-break-after: avoid;
        }

        h2 {
          font-size: 14pt;
          color: #2c3e50;
          border-bottom: 2pt solid #27ae60;
          padding-bottom: 4pt;
          margin-top: 15pt;
          margin-bottom: 8pt;
          page-break-after: avoid;
        }

        /* Checkbox para cada requisito */
        h3::before {
          content: "☐ ";
          font-size: 16pt;
          color: #27ae60;
          margin-right: 5pt;
        }

        h3 {
          font-size: 13pt;
          color: #34495e;
          margin-top: 12pt;
          margin-bottom: 6pt;
          page-break-after: avoid;
          background-color: #f8f8f8;
          padding: 6pt 8pt;
          border-left: 3pt solid #27ae60;
        }

        h4 {
          font-size: 11pt;
          font-weight: bold;
          margin-top: 8pt;
          margin-bottom: 5pt;
          page-break-after: avoid;
        }

        /* Énfasis en respuestas */
        strong {
          font-weight: bold;
          color: #000;
        }

        /* Listas compactas para revisión rápida */
        ul, ol {
          margin-bottom: 8pt;
          padding-left: 18pt;
        }

        li {
          margin-bottom: 3pt;
          line-height: 1.4;
        }

        /* Espacio para comentarios del evaluador */
        .evaluator-notes {
          border: 1pt solid #ccc;
          padding: 15pt;
          margin: 12pt 0;
          min-height: 60pt;
          background-color: #f9f9f9;
        }

        .evaluator-notes::before {
          content: "Comentarios del evaluador:";
          display: block;
          font-weight: bold;
          margin-bottom: 8pt;
          color: #666;
        }

        /* Tablas optimizadas para chequeo */
        table {
          border-collapse: collapse;
          width: 100%;
          margin: 8pt 0;
          page-break-inside: avoid;
          font-size: 10pt;
        }

        th {
          background-color: #e8e8e8 !important;
          font-weight: bold;
          padding: 6pt;
          border: 1pt solid #000;
        }

        td {
          padding: 5pt;
          border: 1pt solid #000;
        }

        /* Añadir columna de verificación a tablas */
        table::after {
          content: "";
        }

        /* Imágenes */
        img {
          max-width: 90%;
          page-break-inside: avoid;
          margin: 8pt 0;
        }

        /* Código y pre - compacto */
        pre, code {
          background-color: #f5f5f5 !important;
          border: 1pt solid #ddd;
          page-break-inside: avoid;
          font-size: 9pt;
        }

        pre {
          padding: 8pt;
        }

        /* Evitar quiebres de página en elementos importantes */
        blockquote, .important {
          page-break-inside: avoid;
          border-left: 3pt solid #27ae60;
          padding-left: 12pt;
          margin: 8pt 0;
          background-color: #f8f8f8;
        }

        /* Links - mostrar URL solo si es relevante */
        a[href^="http"]::after {
          content: " [" attr(href) "]";
          font-size: 8pt;
          color: #666;
          word-break: break-all;
        }

        /* Ocultar badges y elementos decorativos */
        img[src*="shields.io"], 
        img[src*="badge"],
        img[src*="logo.svg"] {
          display: none !important;
        }

        /* Optimizar saltos de página */
        h1, h2, h3, h4, h5, h6 {
          page-break-after: avoid;
        }

        ul, ol, table, pre {
          page-break-inside: avoid;
        }

        /* Resumen de evaluación */
        .evaluation-summary {
          border: 2pt solid #27ae60;
          padding: 15pt;
          margin: 20pt 0;
          background-color: #f0f8f0;
          page-break-inside: avoid;
        }

        .evaluation-summary::before {
          content: "Resumen de Evaluación";
          display: block;
          font-weight: bold;
          font-size: 14pt;
          color: #27ae60;
          margin-bottom: 10pt;
          border-bottom: 1pt solid #27ae60;
          padding-bottom: 5pt;
        }

        /* Checkbox items más grandes para facilitar marcado */
        input[type="checkbox"] {
          width: 15pt;
          height: 15pt;
          margin-right: 5pt;
        }

        /* Marca de agua sutil para material de evaluación */
        body::before {
          content: "Para Evaluación";
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%) rotate(-45deg);
          font-size: 72pt;
          color: rgba(39, 174, 96, 0.05);
          z-index: -1;
          pointer-events: none;
        }

        /* Espacio para firmas al final */
        .signatures {
          margin-top: 30pt;
          padding-top: 20pt;
          border-top: 2pt solid #ccc;
          page-break-inside: avoid;
        }

        .signature-line {
          margin: 15pt 0;
          border-bottom: 1pt solid #000;
          width: 60%;
          display: inline-block;
        }
      }
    </style>
  </head>
  <body>
    {{ content }}
  </body>
</html>
